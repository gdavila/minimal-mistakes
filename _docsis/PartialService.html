---
title: CER, Partial Service y Throughput TCP en Docsis 3.0
excerpt: Analisis sobre el impacto de los problemas en la capa de enlace Docsis sobre el Throughput TCP.
---
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="PartialService_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="PartialService_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="PartialService_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="PartialService_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="PartialService_files/navigation-1.1/tabsets.js"></script>
<script src="PartialService_files/highlightjs-1.1/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">




</div>


<div id="resumen" class="section level1">
<h1>Resumen</h1>
<p>Aquí se analiza brevemente el impacto de <em>Partial Service</em> y el CER en un par de escenarios Docsis 3.0 con channel bonding. Esta discusión surge de detectar problemas de navegación en los CM dosis 3.0 cuando estos están en <em>Partial Service</em>, lo que a priori sonaba extraño. En la práctica, lo que se encuentra es que <em>Partial Service</em> es un estado <em>inestable</em> - en el sentido de que un CM normalmente entra y sale de <em>Partial Service</em> continuamente por la naturaleza de la interferencia- esta <em>inestabilidad</em> hace que las portadoras con problemas se sigan usando entre el CMTS y el CM, degradando el throughput TCP. En este post se muestra brevemente el comportamiento de <em>Partial Service</em> y los valores de CER que impactan el rendimiento de las conexiones TCP.</p>
</div>
<div id="introduccion" class="section level1">
<h1>Introducción</h1>
<p>Con la implementación de <em>channel bonding</em> introducida por DOCSIS 3.0, se introduce también el <em>feature partial service</em> (PS) mediante el cual un cable modem (CM) 3.0 operando en <em>channel bonding</em> muestra una robustez tal, que puede traficar datos con normalidad incluso cuando una o varias de sus portadoras estan <em>offline</em> o con problemas de ruido (SNR, CER, etc).</p>
<p>En la práctica, <em>partial service</em> no soluciona todos los problemas del canal. De hecho, normalmente se requiere que los CMTS sean configurados adecuadamente para que <em>partial service</em> funcione de forma óptima (la flexibliad de esta optimización varía de proveedor en proveedor). Y si bien <em>partial service</em> podría absorver gran parte de los problemas de ruido en un CM, dificilmente las configuraciones por defecto de los CMTS están listas para que este feature funcione eficientemente, de forma que el ruido (y el CER que este causa) continua siendo un problema que debe considerarse no solo en upstream, sino también en downstream. Esto es lo que muestra el resto de este breve reporte. De hecho, en las siguientes pruebas se analiza el impacto del CER en Downstream sobre cable modems 3.0 que no entran en Partial Service (ya sea por CMTS sin la configuración adecuada o por las características propias del ruido). Lo que se encuentra es que el CER produce lentitud en el servicio de datos.</p>
<p>Los resultados son los que la teoría predice. En efecto, teoricamente el CER ocasiona perdida de paquetes IP <span class="math inline">\({p}\)</span>, lo que está directamente relacionado al throughput TCP/IP <a href="https://dl.acm.org/citation.cfm?id=264023">[Mathis et al., 1997]</a>: <span class="math display">\[Throughput_{TCP}=\frac{MSS}{RTT}*\frac{1}{\sqrt{p}}\]</span></p>
</div>
<div id="dataset" class="section level1">
<h1>Dataset</h1>
<p>Las siguientes pruebas se llevan a cabo sobre dos modelos de CM 3.0 sobre los cuales se inserta ruido de forma controlada.</p>
</div>
<div id="metodologia" class="section level1">
<h1>Metodología</h1>
<p>Se evalua el impacto del ruido en los dos CM 3.0 con <em>service group</em> de 20 y 8 portadoras en downstream respectivamente. A este <em>service group</em> se le suma ruido de forma controlada en las frecuencias de 771 MHz y 777 MHz, intentando simular una interferencia causada por LTE. Con este escenario se evalua el throughput TCP mediante la descarda de archivos usando el <a href="http://sps.fibertel.com.ar/">portal de pruebas de servicio de Cablevision</a>. Los CMs poseen un ancho de banda habilitado de 50 Mbps.</p>
</div>
<div id="resultados" class="section level1">
<h1>Resultados</h1>
<div id="throughput-y-snr" class="section level2">
<h2>Throughput y SNR</h2>
<p>El throughput del CM disminuye cuando el SNR de la portadora con interferencia se encuentra entre 25 dB y 27 dB. Cuando el SNR se encuentra por abajo de este umbral, el CM entra en <em>partial service</em>, lo que se traduce en que las portadoras con problemas dejan de usarse y el throughput del CM vuelve a la normalidad (alrededor de 50 Mbps). Este mismo escenario se observa interfiriendo una o dos portadoras (ver Fig 1 y Fig2).</p>
<p>Para ser más exactos con este comportamiento, se observa que más que el SNR, lo que produce que las portadoras entren en <em>partial service</em> es el valor del CER. Si <span class="math inline">\(CER&lt;10\%\)</span> el CM dificilmente entra en <em>partial-service</em> ( o entra y sale constantemente).</p>
<p>La Fig. 1 y 2 muestran como evolucionó el throughput TCP del CM a lo largo del experimento para distintos valores de SNR en la portadora 771 y 777 MHz. En la Fig. 1, a partir del tiempo 4500(s) el throughput TCP se recupera debido a que las portadoras con interferencia tienen tan bajo SNR que entran en <em>partial-service</em>. En la Fig. 2 ocurre lo mismo entre el tiempo 1000(s) y 1600(s)</p>
<div class="figure">
<img src="PartialService_files/figure-html/interferencia1CH-1.png" alt="Fig1" width="672" />
<p class="caption">
Fig1
</p>
</div>
<div class="figure">
<img src="PartialService_files/figure-html/interferencia2CH-1.png" alt="Fig2" width="672" />
<p class="caption">
Fig2
</p>
</div>
</div>
<div id="throughput-y-cerccer" class="section level2">
<h2>Throughput y CER/CCER</h2>
<p>El CER de la portadora interferida (a pesar de que existen otras portadoras en estado óptimo <span class="math inline">\(SNR&gt;35 dB\)</span>) produce limitaciones importantes en el throughput de TCP, principlamente cuando <span class="math inline">\(CER &lt; 10\%\)</span> (para valores de <span class="math inline">\(CER&gt;10\%\)</span> el throughput se recupera debido a que la portadora entra en <em>partial service</em>). La siguientes figuras muestran como el throughput decrece cuando el CER aumenta. El eje <em>x</em> está en escala logarítmica para resaltar que la caida del throughput es bastante rapida y abrupta para pequeños incremetos de CER. A su vez, los resultados muestran que el Throughput depende no solo del CER y sino también de la cantidad de canales en <em>channel bonding</em>, por ejemplo:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Channel Bonding 20 CH:</strong> para un <span class="math inline">\(CER=0.1\%\)</span> el throughput alcanzado baja a 15 Mbps, y para un <span class="math inline">\(CER=1\%\)</span> el throughput baja a 6 Mbps.</p></li>
<li><p><strong>Channel Bonding 8 CH: </strong> para un <span class="math inline">\(CER=0.01\%\)</span> el throughput alcanzado baja a 25 Mbps, <span class="math inline">\(CER=0.1\%\)</span> el throughput decrece a 10 Mbps, y para un <span class="math inline">\(CER=1\%\)</span> el throughput baja a 3 Mbps.</p></li>
</ol>
<p>En ambos casos, para <span class="math inline">\(CER&gt;10\%\)</span> el throughput se recupera debido a que el CM entra en <em>partial service</em>.</p>
<p><img src="PartialService_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Además, el incremento de CER está relacionado directamente con el incremento de CCER. La relación entre estas variables (CER vs CCER) se muestra en la siguiente figura y pueden ayudar a refinar los umbrales de CER/CCER a los que se debe prestar atención. En verde se marcan las combinaciones de CER/CCER que aun permiten alcanzar servicios relativamente cercanos a los 50 Mbps.</p>
<p><img src="PartialService_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>Las figuras analizadas en esta sección permiten concluir que el impacto del CER en el Throughput depende también del número de canales en el <em>channel bonding</em>. En efecto, esto tiene sentido considerando que mientras más canales formen el <em>bonding group</em>, mayor probabilidad tienen los paquetes de evitar los canales con ruido.</p>
</div>
</div>
<div id="discusiones" class="section level1">
<h1>Discusiones</h1>
<p>Los resultados arrojan que el CER impacta directamente en el throughput TCP y limita de throughput que el cliente puede alcanzar. Esto a su vez motiva a la definición de umbrales de CER para alcanzar los servicios/productos que se ofrezcan al cliente. En este aspecto se presentan varias problemáticas (o perspectivas):</p>
<ol style="list-style-type: decimal">
<li><p><strong>Establecer un único umbral de CER/CCER para todos los clientes:</strong> Esta perspectiva puede resultar simple en implementación pero imprecisa para la detección de inconvenientes: no todos los servicios se verán afectados en la misma medida por el CER (i. e., productos de 12 Mbps, 24 Mbps, 50 Mbps, 100 Mbps). En efecto, los servicios más afectados son los que exigen un elevado Throughput. De este modo, la unificación de los umbrales o alarmas de CER y CCER para todos los servicios puede causar que los problemas se subestimen o se sobreestimen.</p></li>
<li><p><strong>Establecer distintos umbrales de CER/CCER de acuerdo al tipo de Servicio:</strong> Este enfoque añade complejidad a la implementación pero resulta en un diagnóstico más preciso de los inconvenientes del cliente.En este sentido, cada producto, tendrá asociado un umbral de CER/CCER que generaría una alarma,</p></li>
</ol>
<p>Una solución alternativa es evaluar un <strong>único umbral normalizado</strong> o un <strong>grupo de umbrales</strong> de CER/CCER coniderando la demanda de tráfico actual y a mediano plazo. En este sentido se debería definir el Throughput mínimo que se desea garantizar para todos los usuarios y garantizar un CER/CCER mínimo que satisfaga dicha demanda.</p>
<p>Desde el punto de vista técnico, otra variable a considerar para definir el umblar del CER/CCER en Downstream es la cantidad de portadoras del <em>channel bonding</em>: a mayor portadoras en <em>bonding</em>, más robusto es el servicio que percibe el cliente. En efecto, la relación del Throughput en función del CER y del número de canales en <em>bonding</em> ( <span class="math inline">\(n_{CH}\)</span>) está dada por:</p>
<p><span class="math display">\[ Throughput_{TCP}=\frac{MSS}{RTT}*\frac{1}{\sqrt{p}}\]</span> Donde el valor de <span class="math inline">\(p\)</span> (paket loss) se reduce en proporción al número de portadoras <span class="math inline">\(n_{CH}\)</span> en <em>channel bonding</em>:</p>
<p><span class="math display">\[ p \approx CER * \frac{IP_{size}}{codeword_{size}}* \frac {1}{n_{CH}}  \approx \frac{7}{n_{CH}} *CER \]</span> <img src="PartialService_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Los valores experimentales obtenidos en estas pruebas se aproximan a la curva teórica (Fig. Superior). En este sentido, se pueden usar estos valores para establecer los umbrales para definir un CER que garantice el throughput acorde a cada producto (es decir, CER máximo que garantizaría que se entregue al cliente el producto ofertado). Estos valores se resumen en la siguiente tabla:</p>
<table>
<caption><strong>Valores máximos de CER (teóricos) y throughput para distintas configuraciones de channel bonding</strong></caption>
<thead>
<tr class="header">
<th align="right">Throughput Máximo (Mbps)</th>
<th align="right">8 CH bonding - CER(%)</th>
<th align="right">16 CH bonding - CER(%)</th>
<th align="right">24 CH bonding - CER(%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">6</td>
<td align="right">0.573</td>
<td align="right">1.145</td>
<td align="right">1.718</td>
</tr>
<tr class="even">
<td align="right">12</td>
<td align="right">0.143</td>
<td align="right">0.286</td>
<td align="right">0.430</td>
</tr>
<tr class="odd">
<td align="right">24</td>
<td align="right">0.036</td>
<td align="right">0.072</td>
<td align="right">0.107</td>
</tr>
<tr class="even">
<td align="right">50</td>
<td align="right">0.008</td>
<td align="right">0.016</td>
<td align="right">0.025</td>
</tr>
<tr class="odd">
<td align="right">100</td>
<td align="right">0.002</td>
<td align="right">0.004</td>
<td align="right">0.006</td>
</tr>
</tbody>
</table>
</div>
<div id="conclusiones" class="section level1">
<h1>Conclusiones</h1>
<ol style="list-style-type: decimal">
<li><p>El impacto de tener una portadora operativa con CER es elevado. Se encuentra que el throughput TCP se ve afectado severamente. Asímismo se encuentra que dado que el CER establece el throughput máximo de los clientes, quienes se ven mas afectados son los que tienen los productos con más ancho de banda contratado.</p></li>
<li><p>El CER se vuelve menos crítico a media que el <em>channel bonding</em> aumenta. Así, el throughput TCP en un CM con 24 canales en <em>channel bonding</em> es menos sensible al CER, que en un CM con 8 canales.</p></li>
</ol>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
